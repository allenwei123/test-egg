webpackJsonp([23],{"4+2q":function(t,e){},SPoc:function(t,e){},rB3r:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("CzdK"),n={name:"recommendForm",data:function(){return{autoUpload:!1,titleFont:this.edata?"编辑商品":"增加商品",data:{name:""},fileList:[],uploadFiles:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}]}}},props:["msg","shopId","edata"],created:function(){var t=this;this.edata&&(this.data=this.edata,Object(i.a)(this.edata.picture,function(e){t.fileList.push({url:e})}))},methods:{handleClose:function(){this.$emit("upList",1)},submitForm:function(){var t=this,e=this;this.$refs.ruleForm.validate(function(a){a?t.uploadFiles.length?Object(i.b)(t.uploadFiles[0],function(t){e.sendAjax(t)}):e.sendAjax():t.$message({message:"请检查参数",type:"warning"})})},sendAjax:function(t){var e=this,a={name:this.data.name,picture:t||this.edata.picture,shopId:this.shopId,id:this.edata?this.edata.id:null},i=this.edata?"/biz/goods/edit":"/biz/goods/add",n=this.edata?"编辑":"添加";this.$xttp.post(i,a).then(function(t){t.errorCode||(e.$message({message:n+"商品成功",type:"success"}),e.$emit("upList",2))})},httpRequest:function(t){this.uploadFiles.push(t.file)},removeFile:function(t){this.uploadFiles.splice(0,1)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"c-uploadDialog",attrs:{title:t.titleFont,visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[a("el-form",{ref:"ruleForm",staticClass:"c-myForm",attrs:{model:t.data,"label-width":"120px",rules:t.rules}},[a("el-form-item",{attrs:{prop:"picture",label:"商品图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","file-list":t.fileList,"list-type":"picture-card","http-request":t.httpRequest,"on-remove":t.removeFile}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])],1)],1)},staticRenderFns:[]};var l={name:"merchantList",data:function(){return{isSou:!1,tableData:[],navDetailData:[{id:0,name:"首页",router:"/home"},{id:1,name:"商圈管理",router:"/home/nav/businessManage/merchant"},{id:2,name:"周边商圈",router:"/home/nav/businessManage/merchant"},{id:3,name:"推荐商品"}],formInline:{name:""},currentPage:1,pageSize:10,loading:!1,isShow:!1,total:0,notice:null,see:!1,seeData:null,visible2:!1,delData:null,statusList:[]}},components:{formPage:a("VU/8")(n,s,!1,function(t){a("SPoc")},"data-v-4bfe42d2",null).exports},methods:{onSubmit:function(){this.notice=null,this.isShow=!this.isShow},handleCurrentChange:function(t){this.currentPage!==t&&this.sendAjax(t)},editHandle:function(t){this.isShow=!0,this.notice=t},delHandle:function(t){this.visible2=!0,this.delData=t},confirmDel:function(){var t=this;this.delData.id&&this.$xttp.get("/biz/goods/"+this.delData.id+"/delete").then(function(e){e.errorCode||(t.visible2=!1,t.delData=null,t.$message({message:"删除成功",type:"success"}),t.find())})},change:function(t){1==t?this.isShow=!1:2!=t&&3!=t||(this.sendAjax(),this.isShow=!1)},selStatus:function(){},find:function(){this.sendAjax(1)},sendAjax:function(t){var e=this,a={page:t||this.$route.query.page||1,shopId:this.$route.query.id};this.formInline.name?a.name=this.formInline.name:delete a.name,this.loading=!0,this.$xttp.post("/biz/goods/page",a).then(function(t){t.errorCode||(e.tableData=t.data.records,e.currentPage=t.data.currentPage,e.total=t.data.total,e.tableData.forEach(function(t){Object(i.a)(t.picture,function(e){t.url=e})})),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.sendAjax()},mounted:function(){}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("div",[a("ul",{staticClass:"c-navDetail clear"},t._l(t.navDetailData,function(e,i){return a("li",{key:i},[t._v(t._s(e.name)+" "),i!==t.navDetailData.length-1?a("span",[t._v(" > ")]):t._e()])})),t._v(" "),a("div",{staticClass:"c-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"优惠品名称"},model:{value:t.formInline.name,callback:function(e){t.$set(t.formInline,"name",e)},expression:"formInline.name"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.find}},[a("i",{staticClass:"iconfont icon-sousuo"},[t._v(" ")]),t._v("查询")])],1)],1),t._v(" "),a("el-button",{staticClass:"c-addBtn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("新增商品")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"加载中...",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"推荐商品","min-width":"100",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"c-image",attrs:{src:t.row.url}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称","min-width":"60",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.editHandle(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.delHandle(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"c-block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("transition",{attrs:{name:"fade1"}},[t.isShow?a("formPage",{attrs:{msg:t.isShow,shopId:this.$route.query.id,edata:t.notice},on:{upList:t.change}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"温馨提示",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("p",[t._v("请问您是否确定删除这条数据吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible2=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmDel}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(t){a("4+2q")},"data-v-82c7ba58",null);e.default=r.exports}});
//# sourceMappingURL=23.836ba4714c4cf3135491.js.map
webpackJsonp([15],{"3VVr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("mtWM");var a=n("bOdI"),s=n.n(a),i=n("CtSm"),o={name:"floorFileForm",data:function(){var t;return{formLabelWidth:"120px",titleFont:"添加楼栋档案",isShow:!1,form:(t={overGround:"",name:""},s()(t,"overGround",""),s()(t,"underGround",""),s()(t,"roomNum",""),s()(t,"communityIdShow",this.$store.getters.communityName),s()(t,"communityId",this.$store.getters.communityId),s()(t,"communityName",this.$store.getters.communityName),t),cityArr:[],current:1}},props:["msg","add"],created:function(){this.add&&(this.form=this.add,this.form.communityIdShow=Object(i.a)(this.$store.getters.communityList,this.$store.getters.communityId),this.titleFont="编辑楼栋档案")},mounted:function(){},methods:{handleClose:function(){this.$emit("upup",this.current)},save:function(t){0!=this.form.name.length?0!=this.form.overGround.length?0!=this.form.underGround.length?0!=this.form.roomNum.length?this.postData():this.$message({message:"请输入房间数量",type:"warning"}):this.$message({message:"请输入地下层数",type:"warning"}):this.$message({message:"请输入楼面层数",type:"warning"}):this.$message({message:"请输入楼栋名称",type:"warning"})},postData:function(){var t=this;this.cityArr[0]&&(this.form.province=this.cityArr[0],this.form.city=this.cityArr[1],this.form.district=this.cityArr[2]);var e=this.add?"编辑":"添加",n=this.add?"/community/building/edit":"/community/building/add";this.$xttp.post(n,this.form).then(function(n){0===n.errorCode?(t.$message({message:e+"楼栋成功",type:"success"}),t.current=2,t.handleClose()):t.$message({message:n.data.errorMsg,type:"error"})}).catch(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.titleFont,visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:t.form}},[n("el-form-item",{staticClass:"c-must",attrs:{label:"楼栋名称：","label-width":t.formLabelWidth,prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{staticClass:"c-must",attrs:{label:"楼面层数","label-width":t.formLabelWidth,prop:"code"}},[n("el-input",{attrs:{type:"number",placeholder:"从一层开始算"},model:{value:t.form.overGround,callback:function(e){t.$set(t.form,"overGround",e)},expression:"form.overGround"}})],1),t._v(" "),n("el-form-item",{staticClass:"c-must",attrs:{label:"地下层数","label-width":t.formLabelWidth,prop:"code"}},[n("el-input",{attrs:{type:"number",placeholder:"从负一层开始算"},model:{value:t.form.underGround,callback:function(e){t.$set(t.form,"underGround",e)},expression:"form.underGround"}})],1),t._v(" "),n("el-form-item",{staticClass:"c-must",attrs:{label:"房间数量","label-width":t.formLabelWidth,prop:"code"}},[n("el-input",{attrs:{type:"number"},model:{value:t.form.roomNum,callback:function(e){t.$set(t.form,"roomNum",e)},expression:"form.roomNum"}})],1),t._v(" "),n("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[n("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save("ruleForm")}}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(o,l,!1,function(t){n("CXm3")},"data-v-0e169818",null).exports,c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"楼栋详情",visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[n("ul",[n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("楼栋名称:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.name)+" ")])]),t._v(" "),n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("楼栋编号:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.code)+" ")])]),t._v(" "),n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("楼面层数:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.overGround)+" ")])]),t._v(" "),n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("地下层数:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(0-t.data.underGround)+" ")])]),t._v(" "),n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("总层数:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.overGround-t.data.underGround)+" ")])]),t._v(" "),n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("房间数量:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.roomNum)+" ")])]),t._v(" "),n("li",{staticClass:"c-list"},[n("span",{staticClass:"c-label"},[t._v("已录入房间数:")]),t._v(" "),n("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.inputRoomNum)+" ")])])])])},staticRenderFns:[]};var u=n("VU/8")({name:"ChargeSee",data:function(){return{arr:[1,2,4,5]}},props:["msg","data"],created:function(){},methods:{handleClose:function(){this.$emit("upsee",!1)}}},c,!1,function(t){n("9ZqW")},"data-v-56276f7d",null).exports,d=n("NYxO"),m={name:"floorFileList",data:function(){return{isSou:!1,tableData:[],navDetailData:[{id:0,name:"首页"},{id:1,name:"基础管理"},{id:2,name:"楼栋档案"}],formInline:{name:""},currentPage:1,pageSize:10,loading:!1,isShow:!1,total:0,notice:null,see:!1,seeData:null,visible2:!1,delData:null}},computed:Object(d.b)(["showAside"]),components:{AddPage:r,SeePage:u},methods:{onSubmit:function(){this.notice=null,this.isShow=!this.isShow},handleCurrentChange:function(t){this.currentPage!==t&&this.sendAjax(t)},handleClick:function(t){this.see=!0,this.seeData=t},editHandle:function(t){this.isShow=!0,this.notice=t},delHandle:function(t){this.visible2=!0,this.delData=t},confirmDel:function(){var t=this;this.delData.id&&this.$xttp.get("/community/building/"+this.delData.id+"/delete").then(function(e){e.errorCode?(t.visible2=!1,t.delData=null):(t.visible2=!1,t.delData=null,t.$message({message:e.data,type:"success"}),t.find())}).catch(function(t){console.log(t)})},change:function(t){1==t?this.isShow=!1:2!=t&&3!=t||(this.sendAjax(),this.isShow=!1)},seeChange:function(t){this.see=!1},find:function(){this.sendAjax(1)},sendAjax:function(t){var e=this,n=t||this.$route.query.page||1,a={page:n,communityId:this.$store.getters.communityId};this.formInline.name?a.name=this.formInline.name:delete a.name,this.loading=!0,this.$xttp.get("/community/building/page",{params:a}).then(function(t){t.errorCode||(e.tableData=t.data.records,e.currentPage=t.data.currentPage,e.total=t.data.total,e.tableData.forEach(function(t){(t.overGround||t.underGround)&&(t.allGound=t.overGround+t.underGround)}),e.$router.push({path:e.$route.path,query:{page:n}})),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.sendAjax(),this.$on("upup",function(t){console.log(t)})},mounted:function(){}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("div",[n("ul",{staticClass:"c-navDetail clear"},t._l(t.navDetailData,function(e,a){return n("li",{key:a},[t._v(t._s(e.name)+" "),a!==t.navDetailData.length-1?n("span",[t._v(" > ")]):t._e()])})),t._v(" "),n("div",{staticClass:"c-search"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"楼栋搜索"},model:{value:t.formInline.name,callback:function(e){t.$set(t.formInline,"name",e)},expression:"formInline.name"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.find}},[n("i",{staticClass:"iconfont icon-sousuo"},[t._v(" ")]),t._v("查询")])],1)],1),t._v(" "),n("el-button",{staticClass:"c-addBtn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("新增楼栋")])],1)]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"c-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"加载中...",border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"楼栋名称","min-width":"100",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"楼面层数","min-width":"60",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.overGround))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"地下层数","min-width":"60",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0-e.row.underGround))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"总层数","min-width":"60",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.overGround-e.row.underGround))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"房间数量","min-width":"70",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.roomNum))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"已录入房间数","min-width":"70",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.inputRoomNum))]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"left",fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){t.handleClick(e.row)}}},[t._v("查看")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){t.editHandle(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){t.delHandle(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("div",{staticClass:"c-block"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),n("transition",{attrs:{name:"fade1"}},[t.isShow?n("AddPage",{attrs:{msg:t.isShow,add:t.notice},on:{upup:t.change,"update:add":function(e){t.notice=e}}}):t._e()],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.see?n("SeePage",{attrs:{msg:t.see,data:t.seeData},on:{upsee:t.seeChange}}):t._e()],1),t._v(" "),n("el-dialog",{attrs:{title:"温馨提示",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[n("p",[t._v("请问您是否确定删除这条数据吗？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible2=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmDel}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var h=n("VU/8")(m,f,!1,function(t){n("Eauf")},"data-v-9e2c19f4",null);e.default=h.exports},"9ZqW":function(t,e){},CXm3:function(t,e){},Eauf:function(t,e){}});
//# sourceMappingURL=15.85f0e452f9b85052d415.js.map
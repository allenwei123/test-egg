webpackJsonp([6],{EHqC:function(t,e){},Ihp3:function(t,e){},eLUi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("mriy");var o=[{value:"0",label:"未知"},{value:"1",label:"男"},{value:"2",label:"女"}],a={name:"EmplAdd",data:function(){return{formLabelWidth:"120px",titleFont:"添加员工",checked:!1,resetPass:!1,dis:!1,phoneDis:!1,postDis:!1,ck:!1,required:!1,message:"请输入密码",form:{employeeId:"",userName:"",phone:"",postCode:"",sex:"",checked:!0,password:"",communityId:this.$store.getters.communityId,communityName:this.$store.getters.communityName,propertyId:localStorage.getItem("propertyId")},postCodeOptions:[],maleOptions:o,current:1}},props:["msg","add"],created:function(){this.initPost(),this.add&&(this.form=this.add,this.resetPass=!0,this.titleFont="编辑员工",this.dis=!0,this.phoneDis=!0,this.postDis=!0,this.required=!1,this.ck=!1,1==this.add.sex&&(this.form.sex="男"),2==this.add.sex&&(this.form.sex="女"),0!=this.add.sex&&null!=this.add.sex||(this.form.sex="未知"))},mounted:function(){},methods:{handleClose:function(){this.$emit("upup",this.current),this.$emit("reload")},showInfo:function(t){this.$message({message:t,type:"warning"})},changeChecked:function(){this.ck?(this.form.password="",this.ck=!1,this.dis=!0):(this.ck=!0,this.form.password="",this.dis=!1)},initPost:function(){var t=this,e=this.$store.getters.communityId;this.$xttp.get("/user/property/"+e+"/post-list").then(function(e){e.errorCode||(t.postCodeOptions=e.data)})},save:function(){""!=this.form.employeeId?""!=this.form.postCode?""!=this.form.userName?""!=this.form.phone?/^1[34578]\d{9}$/.test(this.form.phone)?""!=this.form.sex?("男"==this.form.sex&&(this.form.sex="1"),"女"==this.form.sex&&(this.form.sex="2"),"未知"==this.form.sex&&(this.form.sex="0"),""!=this.form.password?/^([a-zA-Z0-9]{8,})$/.test(this.form.password)?this.postData():this.showInfo("密码8位数以上的数字或字母组合"):this.showInfo("请输入密码")):this.showInfo("请选择性别"):this.showInfo("请输入正确号码"):this.showInfo("请输入号码"):this.showInfo("请输入姓名"):this.showInfo("请选择岗位"):this.showInfo("请输入工号")},postData:function(){var t=this,e=this.add?"编辑":"添加",s=this.add?"/user/property/update-user":"/user/property/create-user";this.$xttp.post(s,this.form).then(function(s){0===s.errorCode?(t.$message({message:e+"员工成功",type:"success"}),t.current=2,t.handleClose(),t.$emit("reload")):t.$message({message:s.errorMsg,type:"error"})}).catch(function(t){console.log(t)})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:t.titleFont,visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:t.form}},[s("el-form-item",{staticClass:"c-must",attrs:{label:"工号：","label-width":t.formLabelWidth,prop:"employeeId"}},[s("el-col",{attrs:{span:14}},[s("el-input",{attrs:{placeholder:"请输入工号"},model:{value:t.form.employeeId,callback:function(e){t.$set(t.form,"employeeId","string"==typeof e?e.trim():e)},expression:"form.employeeId"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"c-must",attrs:{label:"岗位：","label-width":t.formLabelWidth,prop:"postCode"}},[s("el-radio-group",{model:{value:t.form.postCode,callback:function(e){t.$set(t.form,"postCode",e)},expression:"form.postCode"}},t._l(t.postCodeOptions,function(e){return s("el-radio",{key:e.name,attrs:{label:e.key,value:e.name,disabled:t.postDis}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("el-form-item",{staticClass:"c-must",attrs:{label:"姓名：","label-width":t.formLabelWidth,prop:"userName"}},[s("el-col",{attrs:{span:14}},[s("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName","string"==typeof e?e.trim():e)},expression:"form.userName"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"c-must",attrs:{label:"手机号码：","label-width":t.formLabelWidth,prop:"phone"}},[s("el-col",{attrs:{span:14}},[s("el-input",{attrs:{disabled:t.phoneDis,placeholder:"请输入手机号"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone","string"==typeof e?e.trim():e)},expression:"form.phone"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"c-must",attrs:{label:"性别：","label-width":t.formLabelWidth,prop:"sex"}},[s("el-select",{attrs:{"value-key":"key",placeholder:"请选择"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},t._l(t.maleOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-form-item",{staticClass:"c-must",attrs:{label:"密码：","label-width":t.formLabelWidth,prop:"password"}},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{type:"password",disabled:t.dis,placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}}),t._v(" "),t.resetPass?s("el-checkbox",{attrs:{checked:t.ck},on:{change:t.changeChecked},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("重置密码")]):t._e()],1)],1),t._v(" "),s("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[s("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(t){s("Ihp3")},"data-v-0c0ac89e",null).exports,n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"社区档案详情",visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[s("ul",[s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("工号:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.employeeId)+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("社区名称:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.communityName)+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("物业公司:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.propertyName)+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("姓名:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.userName)+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("岗位:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t._f("postCode")(t.data.postCode))+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("手机号:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.phone)+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("创建时间:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t._f("time")(t.data.createAt,"yyyy-MM-dd HH:mm"))+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("员工ID:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.userId)+" ")])]),t._v(" "),s("li",{staticClass:"c-list"},[s("span",{staticClass:"c-label"},[t._v("使用状态:")]),t._v(" "),s("span",{staticClass:"c-content"},[t._v(" "+t._s(t._f("dataStatus")(t.data.dataStatus))+" ")])])])])},staticRenderFns:[]};var r=s("VU/8")({name:"EmplSee",data:function(){return{arr:[1,2,4,5]}},props:["msg","data"],created:function(){},methods:{handleClose:function(){this.$emit("upsee",!1)}}},n,!1,function(t){s("uQ4K")},"data-v-a4ecd6fe",null).exports,c=s("woOf"),d=s.n(c),u={name:"EmplPower",data:function(){return{formLabelWidth:"120px",titleFont:"职权管理",form:{buildLists:[],userToPropertyId:"",checkList:[]}}},props:["msg","add","power"],created:function(){this.getInit(),this.form.userToPropertyId=this.power.id},mounted:function(){},methods:{handleClose:function(){this.$emit("uppower",!1),this.$emit("reload")},showInfo:function(t){this.$message({message:t,type:"warning"})},getInit:function(){var t=this,e=this.$store.getters.communityId;this.$xttp.get("community/building/list",{communityId:e}).then(function(e){e.success&&(t.form.buildLists=e.data)})},save:function(){var t=this,e=this.$store.getters.communityId,s=this.form.userToPropertyId,o={communityId:e},a=d()(o,{userToPropertyId:s},{districtIds:["5acc6e1de4b0bfa7f9927715"]});this.$xttp.post("user/property/add-district",a).then(function(e){e.success?(t.$message({message:"赋权成功",type:"success"}),t.current=2,t.handleClose(),t.$emit("reload")):t.$message({message:e.errorMsg,type:"error"})}).catch(function(t){console.log(t)})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:t.titleFont,visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:t.form}},[s("h3",[t._v("职权范围：")]),t._v(" "),s("el-form-item",{staticStyle:{"margin-top":"20px"}},t._l(t.form.buildLists,function(e){return s("el-checkbox-group",{key:e.id,model:{value:t.form.checkList,callback:function(e){t.$set(t.form,"checkList",e)},expression:"form.checkList"}},[s("el-col",{attrs:{span:6}},[s("el-checkbox",{attrs:{label:e.id}},[t._v(t._s(e.name))])],1)],1)})),t._v(" "),s("el-form-item",{staticStyle:{"text-align":"center"}},[s("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("授权")])],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(u,m,!1,function(t){s("uphh")},"data-v-36365e3c",null).exports,h=s("NYxO"),f={name:"empl",data:function(){return{show:!1,tableData:[],navDetailData:[{id:0,name:"首页"},{id:1,name:"员工管理"},{id:2,name:"员工管理"}],postCode:"SECURITY",postOptions:[],employeeId:"",q_input:null,loading:!1,isShow:!1,notice:null,see:!1,seeData:null,visible2:!1,delData:null,ispower:!1,powerData:null}},computed:Object(h.b)(["showAside"]),components:{AddPage:l,SeePage:r,PowerPage:p},methods:{onSubmit:function(){this.notice=null,this.isShow=!this.isShow},handleClick:function(t){this.see=!0,this.seeData=t},editHandle:function(t){this.isShow=!0,this.notice=t},change:function(t){1==t?this.isShow=!1:2!=t&&3!=t||(this.isShow=!1)},seeChange:function(t){this.see=!1},powerChange:function(t){this.ispower=!1},powerHandle:function(t){this.ispower=!0,this.powerData=t},getPost:function(t){return{MANAGER:"物业管理员",SECURITY:"保安",CLEANER:"保洁",SERVICEMAN:"维修工",SUPPORTSTAFF:"客服人员"}[t]},getStatus:function(t){return{0:"无效",1:"有效"}[t]},delHandle:function(t){this.visible2=!0,this.delData=t},handleWriteoff:function(t){this.visible2=!0,this.delData=t},confirmDel:function(){var t=this;this.delData.id&&this.$xttp.get("/user/property/"+this.delData.id+"/delete").then(function(e){e.errorCode?(t.visible2=!1,t.delData=null,t.$message({message:"注销员工失败",type:"warning"})):(t.visible2=!1,t.delData=null,t.$message({message:"注销员工成功",type:"success"}),t.find())}).catch(function(){console.log(err)})},initPost:function(){var t=this,e=this.$store.getters.communityId;this.$xttp.get("/user/property/"+e+"/post-list").then(function(e){e.errorCode||(t.postOptions=e.data)})},changPostCode:function(){this.getTableList(this.postCode)},find:function(){this.getTableList(this.postCode)},getTableList:function(t){var e=this,s={};s.postCode=this.postCode,this.employeeId?s.employeeId=this.employeeId:delete s.employeeId,this.loading=!0;var o="user/property/"+this.$store.getters.communityId+"/user-list";this.$xttp.get(o,{params:s}).then(function(t){e.loading=!1,0===t.errorCode&&(e.tableData=t.data)}).catch(function(){e.loading=!1})}},created:function(){this.initPost(),this.getTableList()},mounted:function(){}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-main",[s("div",[s("ul",{staticClass:"c-navDetail clear"},t._l(t.navDetailData,function(e,o){return s("li",{key:o},[t._v(t._s(e.name)+" "),o!==t.navDetailData.length-1?s("span",[t._v(" > ")]):t._e()])})),t._v(" "),s("div",{staticClass:"c-search"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"岗位"}},[s("el-select",{attrs:{clearable:"",placeholder:"岗位"},on:{change:t.changPostCode},model:{value:t.postCode,callback:function(e){t.postCode=e},expression:"postCode"}},t._l(t.postOptions,function(t){return s("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}))],1),t._v(" "),s("el-form-item",[s("el-input",{attrs:{placeholder:"工号"},model:{value:t.employeeId,callback:function(e){t.employeeId=e},expression:"employeeId"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.find}},[s("i",{staticClass:"iconfont icon-sousuo"},[t._v(" ")]),t._v("查询")])],1)],1),t._v(" "),s("el-button",{staticClass:"c-addBtn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("新增员工")])],1)]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"c-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"加载中...",border:"","highlight-current-row":"","default-sort":{prop:"createAt",order:"descending"}}},[s("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"}}),t._v(" "),t.show?s("el-table-column",{attrs:{label:"id","min-width":"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}):t._e(),t._v(" "),t.show?s("el-table-column",{attrs:{label:"社区ID","min-width":"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.communityId))]}}])}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:"员工号","min-width":"120",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.employeeId))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"姓名","min-width":"120",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.userName))]}}])}),t._v(" "),t.show?s("el-table-column",{attrs:{label:"社区名称","min-width":"120",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.communityName))]}}])}):t._e(),t._v(" "),t.show?s("el-table-column",{attrs:{label:"物业公司ID","min-width":"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.propertyId))]}}])}):t._e(),t._v(" "),t.show?s("el-table-column",{attrs:{label:"物业公司名称","min-width":"120",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.propertyName))]}}])}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:"角色","min-width":"120",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("postCode")(e.row.postCode)))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"性别","min-width":"100",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("sex")(e.row.sex)))]}}])}),t._v(" "),t.show?s("el-table-column",{attrs:{label:"员工ID","min-width":"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.userId))]}}])}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:"手机号","min-width":"120",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.phone))]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"left",fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"success",size:"small"},on:{click:function(s){t.powerHandle(e.row)}}},[t._v("职权管理")]),t._v(" "),s("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(s){t.editHandle(e.row)}}},[t._v("编辑")]),t._v(" "),"MANAGER"!=e.row.postCode?s("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(s){t.handleWriteoff(e.row)}}},[t._v("注销")]):t._e()]}}])})],1),t._v(" "),s("transition",{attrs:{name:"fade1"}},[t.isShow?s("AddPage",{attrs:{msg:t.isShow,add:t.notice},on:{reload:t.getTableList,upup:t.change,"update:add":function(e){t.notice=e}}}):t._e()],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.see?s("SeePage",{attrs:{msg:t.see,data:t.seeData},on:{upsee:t.seeChange}}):t._e()],1),t._v(" "),s("transition",{attrs:{name:"power"}},[t.ispower?s("PowerPage",{attrs:{msg:t.ispower,power:t.powerData},on:{reload:t.getTableList,uppower:t.powerChange,"update:power":function(e){t.powerData=e}}}):t._e()],1),t._v(" "),s("el-dialog",{attrs:{title:"温馨提示",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[s("p",[t._v("请问您是否确定注销员工吗？")]),t._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible2=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmDel}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var _=s("VU/8")(f,v,!1,function(t){s("EHqC")},"data-v-eff28458",null);e.default=_.exports},mriy:function(t,e,s){"use strict"},uQ4K:function(t,e){},uphh:function(t,e){}});
//# sourceMappingURL=6.e5762184784aa9bafd77.js.map
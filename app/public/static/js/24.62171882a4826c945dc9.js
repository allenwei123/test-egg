webpackJsonp([24],{"6qVN":function(e,t){},GM8Z:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("2hfY"),n={data:function(){return{form:{name:"",buildingId:"",brand:"",deviceType:"",deviceId:"",communityId:this.$store.getters.communityId},rules:{name:[{required:!0,message:"请输入门禁",trigger:"blur"}],buildingId:[{required:!0,message:"请选择楼栋",trigger:"blur"}],brandNo:[{required:!0,message:"请输入厂商",trigger:"blur"}],deviceType:[{required:!0,message:"请输入型号",trigger:"blur"}],deviceCode:[{required:!0,message:"请输入设备编号",trigger:"blur"}]},data:{},value:"",makeAt:"",options3:[],options:[{id:1,name:"米立"},{id:2,name:"康途"},{id:3,name:"金博"}]}},methods:{handleClose:function(){this.$emit("change")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.postData()})},getTime:function(e,t){return null==e?"/":o.a.timestampToFormat(e,t)},getFloorList:function(){var e=this;this.$xttp.get("community/building/list",{params:{communityId:this.communityId}}).then(function(t){t.errorCode||(e.options3=t.data)})},postData:function(){var e=this;this.$xttp.post("communityIoT/door/add",this.form).then(function(t){0===t.errorCode?(e.$message({message:"新增成功",type:"success"}),e.handleClose(),e.$emit("addSuccess")):e.$message({message:t.data.errorMsg,type:"error"})}).catch(function(e){console.log(e)})}},created:function(){this.getFloorList()},props:["msg"]},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增门禁",visible:e.msg,"before-close":e.handleClose},on:{"update:visible":function(t){e.msg=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"门禁",prop:"name",required:""}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属楼栋",prop:"buildingId","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"全部楼栋",clearable:""},model:{value:e.form.buildingId,callback:function(t){e.$set(e.form,"buildingId",t)},expression:"form.buildingId"}},e._l(e.options3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"厂商",prop:"brandNo","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"品牌",clearable:""},model:{value:e.form.brandNo,callback:function(t){e.$set(e.form,"brandNo",t)},expression:"form.brandNo"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"型号",prop:"deviceType","label-width":"120px",required:""}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.deviceType,callback:function(t){e.$set(e.form,"deviceType",t)},expression:"form.deviceType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"deviceCode","label-width":"120px",required:""}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.deviceCode,callback:function(t){e.$set(e.form,"deviceCode",t)},expression:"form.deviceCode"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var i={components:{AddPage:a("VU/8")(n,l,!1,function(e){a("6qVN")},"data-v-33482c75",null).exports},data:function(){return{show:!1,loading:!1,communityName:this.$store.getters.communityName,communityId:this.$store.getters.communityId,tableData:[],pageSize:10,total:0,currentPage:1,input:"",q_input:null,value1:"",options:[{id:1,name:"米立"},{id:2,name:"康途"},{id:3,name:"金博"}],value2:"",options2:[],navDetailData:[{id:0,name:"社区物联"},{id:1,name:"门禁管理"},{id:2,name:"门禁档案"}],options3:[],value3:""}},methods:{query:function(){this.q_input=this.input,1!==this.currentPage?this.currentPage=1:this.getTableList(1)},getFloorList:function(){var e=this;this.$xttp.get("community/building/list",{params:{communityId:this.communityId}}).then(function(t){t.errorCode||(e.options3=t.data)})},changeStatus:function(){this.query()},add:function(){this.show=!0},addChange:function(){this.show=!1},getTableList:function(e){var t=this;this.loading=!0;var a="communityIoT/record/door/list?page="+e+"&size="+this.pageSize,o={};o.communityId=this.communityId,this.value1&&(o.brandNo=this.value1),this.value2&&(o.elevatorId=this.value2),this.value3&&(o.buildingId=this.value3),this.q_input&&(o.name=this.q_input),this.$xttp.post(a,o).then(function(e){t.loading=!1,0===e.errorCode&&(t.tableData=e.data.records,t.total=e.data.total)}).catch(function(){t.loading=!1})},onlineStatus:function(e){if(e)return 1==e?"离线":"在线"},view:function(e){console.log(e),this.$router.push({path:"/home/nav/communityIoT/doorRecord",query:{deviceId:e.deviceId||""}})}},created:function(){this.query(),this.getFloorList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("ul",{staticClass:"c-navDetail clear"},e._l(e.navDetailData,function(t,o){return a("li",{key:o},[e._v(e._s(t.name)+" "),o!==e.navDetailData.length-1?a("span",[e._v(" > ")]):e._e()])})),e._v(" "),a("div",{staticClass:"c-rpass-container"},[a("div",{staticClass:"c-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-select",{attrs:{placeholder:"品牌",clearable:""},on:{change:e.changeStatus},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{placeholder:"型号",clearable:""},on:{change:e.changeStatus},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{attrs:{placeholder:"全部楼栋",clearable:""},on:{change:e.changeStatus},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}},e._l(e.options3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"门禁"},model:{value:e.input,callback:function(t){e.input="string"==typeof t?t.trim():t},expression:"input"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"c-addBtn",attrs:{type:"primary"},on:{click:e.add}},[e._v("新增门禁")])],1)],1)],1),e._v(" "),a("div",{staticClass:"c-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"序号",width:"80","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s((e.currentPage-1)*e.pageSize+t.$index+1))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"门禁","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"楼栋名称","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.buildingName))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"厂商","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.brand))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.deviceType))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.deviceCode))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"运行状态","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.onlineStatus(t.row.onlineStatus)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.view(t.row)}}},[e._v("使用记录")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"c-pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.getTableList,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.show?a("AddPage",{attrs:{msg:e.show},on:{change:e.addChange,addSuccess:e.query}}):e._e()],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("hU5F")},"data-v-6c3c932c",null);t.default=s.exports},hU5F:function(e,t){}});
//# sourceMappingURL=24.62171882a4826c945dc9.js.map
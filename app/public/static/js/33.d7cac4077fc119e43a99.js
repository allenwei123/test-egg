webpackJsonp([33],{mrdw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("2hfY"),l={name:"complaint",data:function(){return{value6:"",value1:"",options:[{value:"1",label:"住户投诉"},{value:"2",label:"员工投诉"}],loading:!1,input:"",tableData:[],pageSize:10,total:0,currentPage:1,navDetailData:[{id:0,name:"物业服务"},{id:1,name:"投诉报事"},{id:2,name:"住户投诉"}]}},methods:{identity:function(t){return{1:"住户",2:"物业"}[t]},query:function(){this.q_input=this.input,1!==this.currentPage?this.currentPage=1:this.getTableList(1)},changeStatus:function(){this.query(),this.tableData=[]},getTableList:function(t){var e=this;this.loading=!0;var a="property/complain/page?page="+t+"&size="+this.pageSize,n={};if(n.communityId=this.$store.getters.communityId,this.q_input&&(n.userName=this.q_input),n.messageSource=this.value1,this.value6){var l=new Date(this.value6[0]),i=new Date(this.value6[1]);n.startAt=l.getFullYear()+"-"+(l.getMonth()<10?"0":"")+(l.getMonth()+1)+"-"+(l.getDate()<10?"0":"")+l.getDate(),n.endAt=i.getFullYear()+"-"+(i.getMonth()<10?"0":"")+(i.getMonth()+1)+"-"+(i.getDate()<10?"0":"")+i.getDate()}console.log(n),this.$xttp.post(a,n).then(function(t){e.loading=!1,0===t.errorCode&&(e.tableData=t.data.records,e.total=t.data.total)}).catch(function(){e.loading=!1})},del:function(t){var e=this;this.$confirm("确认删除投诉？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0;var a="property/complain/"+t.id+"/delete";e.$xttp.get(a).then(function(t){e.loading=!1,0===t.errorCode&&e.getTableList(1)}).catch(function(){e.loading=!1})}).catch(function(){})},getTime:function(t,e){return null==t?"/":n.a.timestampToFormat(t,e)}},created:function(){this.query()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-main",[a("ul",{staticClass:"c-navDetail clear"},t._l(t.navDetailData,function(e,n){return a("li",{key:n},[t._v(t._s(e.name)+" "),n!==t.navDetailData.length-1?a("span",[t._v(" > ")]):t._e()])})),t._v(" "),a("div",{staticClass:"c-notice-container"},[a("div",{staticClass:"c-searchbar"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-select",{attrs:{placeholder:"全部",clearable:""},on:{change:t.changeStatus},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.changeStatus},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}}),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"投诉人"},model:{value:t.input,callback:function(e){t.input="string"==typeof e?e.trim():e},expression:"input"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"c-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",width:"80","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"投诉人","min-width":"180","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.userName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"身份","min-width":"180","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.identity(e.row.messageSource)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"投诉时间","min-width":"160","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getTime(e.row.createAt,"yyyy-MM-dd HH:mm")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"投诉内容","min-width":"150","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.content))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150",fixed:t.tableData.length?"right":"/"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"c-pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.getTableList,"update:currentPage":function(e){t.currentPage=e}}})],1)])])],1)},staticRenderFns:[]};var o=a("VU/8")(l,i,!1,function(t){a("rECl")},"data-v-7056bee7",null);e.default=o.exports},rECl:function(t,e){}});
//# sourceMappingURL=33.d7cac4077fc119e43a99.js.map
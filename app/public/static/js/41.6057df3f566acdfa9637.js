webpackJsonp([41],{gity:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("zL8q"),a={name:"login",data:function(){return{phone:localStorage.getItem("userInfo")?localStorage.getItem("userInfo").phone:"",pwd:"",dialogVisible:!1,options:[],value:localStorage.getItem("communityId")?localStorage.getItem("communityId"):null}},methods:{login:function(){var t=this;if(this.phone.length&&this.pwd.length){var e=i.Loading.service();this.$xttp.post("user/signIn",{phone:this.phone,pwd:this.pwd}).then(function(o){if(console.log("ccc"),t.$store.dispatch("changeToken",o.data),0===o.errorCode){var i=o.data.id;t.$xttp.get("community/"+i+"/queryByUserId").then(function(e){e.errorCode||(e.data.forEach(function(e){var o={name:e.name,id:e.id,propertyId:e.propertyId};t.options.push(o)}),t.dialogVisible=!0,t.$store.dispatch("cgCommunityList",t.options))})}t.pwd="",e.close()}).catch(function(){console.log("aaaa"),e.close()})}else this.$message({message:"账号和密码不能为空",type:"warning"})},change:function(t){var e=this,o=this.options.find(function(t){return t.id===e.value}).name,i=this.options.find(function(t){return t.id===e.value}).propertyId;localStorage.setItem("communityName",o),localStorage.setItem("propertyId",i)},handleClose:function(){this.dialogVisible=!1},comfirm:function(){this.value?(console.log(this.value),this.$store.dispatch("addCommunityId",this.value),this.dialogVisible=!1,this.$router.push("/home")):this.$message("请选择社区")}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"c-login-container"},[o("div",{staticClass:"bg"}),t._v(" "),o("div",{staticClass:"login-area"},[t._m(0),t._v(" "),o("div",{staticClass:"form"},[o("div",{staticClass:"form-item"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.phone,expression:"phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"用户名",autofocus:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),o("div",{staticClass:"form-item"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pwd,expression:"pwd",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),o("div",{staticClass:"footer"},[o("button",{attrs:{type:"button"},on:{click:t.login}},[t._v("登 录")])])]),t._v(" "),o("el-dialog",{attrs:{title:"请选择社区",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.comfirm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("h2",[this._v("后台登录")])])}]};var s=o("VU/8")(a,n,!1,function(t){o("qkm1")},"data-v-50d4c5aa",null);e.default=s.exports},qkm1:function(t,e){}});
//# sourceMappingURL=41.6057df3f566acdfa9637.js.map
webpackJsonp([11],{K5b9:function(t,e){},TM3V:function(t,e){},cOCZ:function(t,e){},iZok:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("CzdK");var s=[{key:"1",value:"轮班"},{key:"2",value:"长班"}],i={name:"CarAdd",data:function(){return{formLabelWidth:"120px",show:!1,form:{communityId:localStorage.getItem("communityId"),userId:JSON.parse(localStorage.getItem("userInfo")).id,carNo:"",postCode:"SECURITY",empl:""},rules:{carNo:[{required:!0,message:"请输入车牌号",trigger:"blur,change"}],carType:[{required:!0,message:"请输入车型号",trigger:"blur,change"}],carColor:[{required:!0,message:"请输入车颜色",trigger:"blur,change"}],drivingPermit:[{required:!0,message:"请输入驾驶证",trigger:"blur,change"}],drivingPermitPicUrl:[{required:!0,message:"请上传驾驶证照片",trigger:"blur,change"}]},file:null,fileList2:[],roleOptions:[],current:1,typeOptions:s,ij:this.msg,postOptions:[],emplData:[]}},props:["msg","add"],created:function(){this.initRole(),this.initEmpl()},mounted:function(){},methods:{handleClose:function(){this.$emit("upup",this.current)},showInfo:function(t){this.$message({message:t,type:"warning"})},onExceed:function(){this.$message("只能上传一张图片")},save:function(){if(this.form.carNo.length){var t=new RegExp("^([一-龥][a-zA-Z](([DF](?![a-zA-Z0-9]*[IO])[0-9]{4,5})|([0-9]{5}[DF])))|([冀豫云辽黑湘皖鲁苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼渝京津沪新京军空海北沈兰济南广成使领A-Z]{1}[a-zA-Z0-9]{5,6}[a-zA-Z0-9挂学警港澳]{1})$");this.form.carNo.length?t.test(this.form.carNo)?this.form.postCode.length?this.form.empl.length?this.submitForm():this.showInfo("请选择员工"):this.showInfo("请选择岗位"):this.showInfo("车牌号不正确"):this.showInfo("车牌号码不能为空")}else this.showInfo("车牌号码不能为空")},submitForm:function(){var t=this;this.loading=!0;var e={};e.communityId=this.$store.getters.communityId,e.userId=this.form.empl,e.carNo=this.form.carNo;this.$xttp.post("/vehicle/applyCarNum/property",e).then(function(e){t.loading=!1,0===e.errorCode&&(t.ij=!1,t.$message({message:"新增车辆成功",type:"success"}),t.$emit("reload"))}).catch(function(){t.loading=!1})},initRole:function(){var t=this,e=this.$store.getters.communityId;this.$xttp.get("/user/property/"+e+"/post-list").then(function(e){e.errorCode||(t.postOptions=e.data)})},initEmpl:function(){var t=this,e=this.$store.getters.communityId,a=this.form.postCode;this.$xttp.get("/user/property/"+e+"/user-list",{params:{postCode:a}}).then(function(e){e.errorCode||(t.emplData=e.data)})},changePostCode:function(){this.form.empl="",this.initEmpl()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"新增车辆",visible:t.ij,"before-close":t.handleClose},on:{"update:visible":function(e){t.ij=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:t.form,rules:t.rules}},[t.show?a("el-form-item",{staticClass:"c-must",attrs:{label:"所在社区","label-width":t.formLabelWidth,prop:"communityId"}},[a("el-input",{model:{value:t.form.communityId,callback:function(e){t.$set(t.form,"communityId",e)},expression:"form.communityId"}})],1):t._e(),t._v(" "),t.show?a("el-form-item",{staticClass:"c-must",attrs:{label:"用户ID：","label-width":t.formLabelWidth,prop:"userId"}},[a("el-input",{model:{value:t.form.userId,callback:function(e){t.$set(t.form,"userId",e)},expression:"form.userId"}},[t._v('JSON.parse(localStorage.getItem("userInfo")).id')])],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"c-must",attrs:{label:"车牌号码：","label-width":t.formLabelWidth,prop:"carNo"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:t.form.carNo,callback:function(e){t.$set(t.form,"carNo",e)},expression:"form.carNo"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"c-must",attrs:{label:"岗位：","label-width":t.formLabelWidth,prop:"postCode"}},[a("el-select",{attrs:{placeholder:"postOptions"},on:{change:t.changePostCode},model:{value:t.form.postCode,callback:function(e){t.$set(t.form,"postCode",e)},expression:"form.postCode"}},t._l(t.postOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}))],1),t._v(" "),a("el-form-item",{staticClass:"c-must",attrs:{label:"员工：","label-width":t.formLabelWidth,prop:"empl"}},[a("el-select",{attrs:{placeholder:"请选择员工"},model:{value:t.form.empl,callback:function(e){t.$set(t.form,"empl",e)},expression:"form.empl"}},t._l(t.emplData,function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save("ruleForm")}}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(t){a("TM3V")},"data-v-a5b8f728",null).exports,o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"车辆认证详情",visible:t.msg,"before-close":t.handleClose},on:{"update:visible":function(e){t.msg=e}}},[a("ul",[a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("车牌号:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.carNo)+" ")])]),t._v(" "),a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("用户ID:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.userId)+" ")])]),t._v(" "),a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("车辆型号:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.carType)+" ")])]),t._v(" "),a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("车辆型号名称:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.carTypeName)+" ")])]),t._v(" "),a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("车辆颜色:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.carColor)+" ")])]),t._v(" "),a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("行驶证:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.drivingPermit)+" ")])]),t._v(" "),a("li",{staticClass:"c-list"},[a("span",{staticClass:"c-label"},[t._v("行驶证照片:")]),t._v(" "),a("span",{staticClass:"c-content"},[t._v(" "+t._s(t.data.drivingPermitPicUrl)+" ")])])])])},staticRenderFns:[]};var r=a("VU/8")({name:"carFileSee",data:function(){return{arr:[1,2,4,5]}},props:["msg","data"],created:function(){},methods:{handleClose:function(){this.$emit("upsee",!1)}}},o,!1,function(t){a("cOCZ")},"data-v-2cba0ebd",null).exports,c=a("NYxO"),u=(a("2hfY"),{name:"schedul",data:function(){return{show:!1,postOptions:[],isSou:!1,tableData:[],msg:"",navDetailData:[{id:0,name:"物业管理"},{id:1,name:"基础管理"},{id:2,name:"车辆认证"}],formInline:{carNo:""},pageSize:10,total:0,currentPage:1,loading:!1,isShow:!1,isSee:!1,seeData:null,notice:null,add:!1,addData:null,visible2:!1,delData:null,visible3:!1,carId:null,refuse:!1,pass:!1}},computed:Object(c.b)(["showAside"]),components:{AddPage:l,SeePage:r},methods:{onSubmit:function(){this.notice=null,this.isShow=!this.isShow},addCar:function(){this.notice=null,this.isShow=!this.isShow},handleClick:function(t){this.isSee=!0,this.seeData=t},editHandle:function(t){this.isShow=!0,this.notice=t},handleUnbundl:function(t){this.visible2=!0,this.delData=t},delHandle:function(t){this.visible2=!0,this.delData=t},seeChange:function(t){this.isSee=!1},change:function(t){1==t?this.isShow=!1:2!=t&&3!=t||(this.isShow=!1)},auditStatusFilter:function(t,e){var a=t[e.property];return 0===a?"未审核":1===a?"已审核":-1===a?"未通过":3===a?"已解绑":void 0},handleDone:function(t,e){var a=t.id;1==(e=e)&&(this.visible3=!0,this.pass=!0,this.refuse=!1,this.carId=a,this.status=1),-1==e&&(this.visible3=!0,this.refuse=!0,this.pass=!1,this.carId=a,this.status=-1)},confirmPR:function(){var t=this;this.carId&&this.$xttp.post("/vehicle/auditCar",{carId:this.carId,verifyCode:this.status}).then(function(e){e.success&&(t.visible3=!1,t.carId=null,t.status="",t.$message({message:"操作成功",type:"success"}),t.getTableList())})},confirmDel:function(){var t=this;this.delData.id&&this.$xttp.get("/vehicle/deleteCarNo/"+this.delData.id).then(function(e){e.errorCode||(t.visible2=!1,t.delData=null,t.$message({message:"车辆注销成功",type:"success"}),t.getTableList())})},initPost:function(){var t=this,e=this.$store.getters.communityId;this.$xttp.get("/user/property/"+e+"/post-list").then(function(e){e.errorCode||(t.postOptions=e.data)})},getTableList:function(t,e){var a=this,s={page:t||this.$route.query.page||1},i=this.$store.getters.communityId;e?s.carNo=this.formInline.carNo:delete s.carNo,this.$xttp.get("/vehicle/"+i+"/page",{params:s}).then(function(t){t.success&&(a.tableData=t.data.records,a.currentPage=t.data.currentPage,a.total=t.data.total,a.totalPage=t.data.totalPage),a.loading=!1}).catch(function(t){a.loading=!1})},find:function(){var t=this,e=this.$store.getters.communityId,a=this.formInline.carNo;this.$xttp.get("/vehicle/"+e+"/page?carNo="+a).then(function(e){e.errorCode||(t.tableData=e.data.records,t.currentPage=e.data.currentPage,t.total=e.data.total,t.totalPage=e.data.totalPage),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.getTableList()},mounted:function(){}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("div",[a("ul",{staticClass:"c-navDetail clear"},t._l(t.navDetailData,function(e,s){return a("li",{key:s},[t._v(t._s(e.name)+" "),s!==t.navDetailData.length-1?a("span",[t._v(" > ")]):t._e()])})),t._v(" "),a("div",{staticClass:"c-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{attrs:{placeholder:"关键字搜索"},model:{value:t.formInline.carNo,callback:function(e){t.$set(t.formInline,"carNo","string"==typeof e?e.trim():e)},expression:"formInline.carNo"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.find}},[a("i",{staticClass:"iconfont icon-sousuo"},[t._v(" ")]),t._v("查询")])],1)],1),t._v(" "),a("el-button",{staticClass:"c-addBtn",attrs:{type:"primary"},on:{click:t.addCar}},[t._v("新增车辆")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"c-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"加载中...",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),t._v(" "),t.show?a("el-table-column",{attrs:{align:"center",prop:"id",label:""}}):t._e(),t._v(" "),t.show?a("el-table-column",{attrs:{align:"center",prop:"userId",label:""}}):t._e(),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"carNo",label:"车牌号",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"车库信息",width:"450",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.parkingName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属住户",width:"250",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:""}},[t._v(t._s(e.row.userName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"auditStatus",label:"审核状态",formatter:t.auditStatusFilter,width:"120"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.auditStatus||-1==e.row.auditStatus?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.handleUnbundl(e.row)}}},[t._v("注销")]):t._e(),t._v(" "),0==e.row.auditStatus?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.handleDone(e.row,"1")}}},[t._v("通过")]):t._e(),t._v(" "),0==e.row.auditStatus?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.handleDone(e.row,"-1")}}},[t._v("拒绝")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"c-block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.getTableList}})],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.isShow?a("AddPage",{attrs:{msg:t.isShow,add:t.notice},on:{reload:t.getTableList,upup:t.change,"update:add":function(e){t.notice=e}}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"see"}},[t.isSee?a("SeePage",{attrs:{msg:t.isSee,data:t.seeData},on:{upsee:t.seeChange}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"温馨提示",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("p",[t._v("请问您是否确定注销车辆吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible2=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmDel}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"温馨提示",visible:t.visible3},on:{"update:visible":function(e){t.visible3=e}}},[t.pass?a("p",[t._v("请问您确定绑定车辆吗？")]):t._e(),t._v(" "),t.refuse?a("p",[t._v("请问您确定拒绝绑定车辆吗？")]):t._e(),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible3=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmPR}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("K5b9")},"data-v-e74d6ce0",null);e.default=m.exports}});
//# sourceMappingURL=11.29e4d21416f7dc3a3236.js.map
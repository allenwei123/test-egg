webpackJsonp([42],{f4GG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("NYxO"),i=a("CzdK"),l=a("2hfY"),o={name:"class",data:function(){return{loading:!1,show:!1,taskType:"1",dialogVisible:!1,srcP:"",navDetailData:[{id:0,name:"物业管理"},{id:1,name:"保安考勤"}],formInline:{empl:"",rangeDate:"",start:"",end:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},postCode:"SECURITY",emplData:[],tableData:[],pageSize:10,total:0,currentPage:1,input:"",q_input:null}},computed:Object(n.b)(["showAside"]),components:{},methods:{query:function(){1!==this.currentPage?this.currentPage=1:this.getTableList()},getTableList:function(){var e=this;this.loading=!0;var t={};t.communityId=this.$store.getters.communityId,t.taskType=this.taskType,this.formInline.empl?t.userName=this.formInline.empl:delete t.userName,""==this.formInline.rangeDate||null==this.formInline.rangeDate||"undefined"==this.formInline.rangeDate?(t.startDate=l.a.dateFormat(new Date,"yyyy-MM-01"),t.endDate=l.a.dateFormat(new Date,"yyyy-MM-31")):(t.startDate=this.formInline.rangeDate[0],t.endDate=this.formInline.rangeDate[1]);var a="/task/record/page?page="+this.currentPage+"&size="+this.pageSize;this.$xttp.post(a,t).then(function(t){e.loading=!1,t.success&&(e.tableData=t.data.records,e.total=t.data.total)}).catch(function(){e.loading=!1})},initEmpl:function(){var e=this,t=this.$store.getters.communityId,a=this.postCode;this.$xttp.get("/user/property/"+t+"/user-list",{params:{postCode:a}}).then(function(t){t.errorCode||(e.emplData=t.data)})},getTime:function(e,t){return null==e?"/":l.a.timestampToFormat(e,t)},changRangeDate:function(){this.query()},changeEmpl:function(){this.query()},showP:function(e){var t=this;Object(i.a)(e,function(e){t.srcP=e,t.dialogVisible=!0})},handleClose:function(){this.dialogVisible=!1,this.srcP=""}},created:function(){this.initEmpl(),this.query()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",[a("ul",{staticClass:"c-navDetail clear"},e._l(e.navDetailData,function(t,n){return a("li",{key:n},[e._v(e._s(t.name)+" "),n!==e.navDetailData.length-1?a("span",[e._v(" > ")]):e._e()])})),e._v(" "),a("div",{staticClass:"c-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"员工：",prop:"empl"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择员工"},on:{change:e.changeEmpl},model:{value:e.formInline.empl,callback:function(t){e.$set(e.formInline,"empl",t)},expression:"formInline.empl"}},e._l(e.emplData,function(e){return a("el-option",{key:e.userName,attrs:{label:e.userName,value:e.userName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间："}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.changRangeDate},model:{value:e.formInline.rangeDate,callback:function(t){e.$set(e.formInline,"rangeDate",t)},expression:"formInline.rangeDate"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)],1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"c-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",width:"80","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s((e.currentPage-1)*e.pageSize+t.$index+1))]}}])}),e._v(" "),e.show?a("el-table-column",{attrs:{label:"ID","min-width":"80",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}):e._e(),e._v(" "),e.show?a("el-table-column",{attrs:{label:"创建时间","min-width":"160",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("time")(t.row.createAt,"yyyy-MM-dd HH:mm:ss")))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"员工","min-width":"200",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userName))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"考勤时间","min-width":"200",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.getTime(t.row.createAt,"yyyy-MM-dd hh:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"凭证","min-width":"300",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showP(t.row.url)}}},[e._v(e._s(t.row.url))])]}}])})],1),e._v(" "),a("div",{staticClass:"c-pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.getTableList,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"凭证",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{src:e.srcP,width:"100%",height:"100%"}})])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,r,!1,function(e){a("nUtr")},"data-v-3c143838",null);t.default=s.exports},nUtr:function(e,t){}});
//# sourceMappingURL=42.66f33cc56c1f5804fd50.js.map